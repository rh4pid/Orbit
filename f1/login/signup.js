const Catalog = [
    {
      cat: "Home",
      image: "../pic/home.jpg",
      skills: [
        "General Handyman",
        "Carpentry (repairs, installations)",
        "Plumbing (household)",
        "Electrical (household)",
        "Painting (interior/ exterior)",
        "Appliance Repair",
        "HVAC (heating, ventilation, air conditioning)",
        "Cleaning (house)",
        "Landscaping / Gardening",
        "Pest Control",
        "Locksmith (residential)",
        "Window and Door Installation / Repair",
        "Flooring Installation",
        "Interior Decorating",
        "Furniture Repair / Restoration",
      ],
    },
    {
      cat: "Electric",
      image: "../pic/electric.jpg",
      skills: [
        "Electrical Wiring (residential, commercial)",
        "Appliance Repair (electrical)",
        "Electronics Repair",
        "Low Voltage Systems (security, data)",
        "Solar Panel Installation",
        "Wind Turbine Maintenance",
        "Generator Service",
        "Lighting Installation/Design",
      ],
    },
    {
      cat: "Wood",
      image: "../pic/wood.jpg",
      skills: [
        "Cabinet Making",
        "Furniture Making (custom, repair)",
        "Woodworking (general, carving, turning)",
        "Framing Carpentry",
        "Finish Carpentry",
        "Luthier (instrument making/repair)",
        "Wood Carving",
        "Wood Turning",
        "Boat Building (wooden)",
        "Timber Framing",
        "Parquet Flooring",
        "Wooden Toy Making",
      ],
    },
    {
      cat: "Vehicle",
      image: "../pic/vehicle.jpg",
      skills: [
        "Auto Mechanics (general repair)",
        "Auto Body Repair",
        "Automotive Electrical",
        "Tire Services",
        "Transmission Repair",
        "Brake Service",
        "Auto Detailing",
        "Motorcycle Mechanics",
        "Boat Mechanics",
        "Aircraft Mechanics",
        "Heavy Equipment Mechanics",
        "Vehicle Upholstery",
      ],
    },
    {
      cat: "Beauty",
      image: "../pic/beauty.jpg",
      skills: [
        "Hairdressing / Styling",
        "Barbering",
        "Makeup Artistry",
        "Nail Care (manicures, pedicures)",
        "Esthetics (skincare)",
        "Massage Therapy",
        "Cosmetology (multiple services)",
        "Lash/Brow Services",
        "Tattoo Artistry (cosmetic/artistic)",
        "Permanent Makeup",
      ],
    },
    {
      cat: "Metal",
      image: "../pic/metal.jpg",
      skills: [
        "Welding",
        "Metal Fabrication",
        "Blacksmithing",
        "Machining",
        "Locksmith (metal systems)",
        "Automotive Body Repair",
        "Jewelry Making (metal)",
        "Metal Sculpting",
        "Farrier (horseshoes)",
        "Metal Engraving",
        "Ornamental Ironwork",
        "Knife Making",
      ],
    },
    {
      cat: "Construction",
      image: "../pic/Construction.jpg",
      skills: [
        "General Contracting",
        "Carpentry (framing, roofing, finishing)",
        "Masonry (brick, block, stone)",
        "Roofing",
        "Plumbing (construction)",
        "Electrical (construction)",
        "HVAC Installation",
        "Drywall Installation",
        "Painting (construction)",
        "Tile Setting",
        "Concrete Finishing",
        "Landscaping (site prep)",
        "Heavy Equipment Operation",
        "Excavation",
      ],
    },
    {
      cat: "Water",
      image: "../pic/water.jpg",
      skills: [
        "Plumbing (water systems)",
        "Irrigation System Installation/Repair",
        "Water Well Drilling",
        "Water Treatment",
        "Pool/Spa Service (maintenance, repair)",
        "Waterproofing",
        "Marine Mechanics (water systems)",
        "Hydraulic System Repair",
      ],
    },
    {
      cat: "Textiles & Leather",
      image: "../pic/textiles.jpg",
      skills: [
        "Sewing/Tailoring",
        "Leatherworking (bags, belts, shoes)",
        "Weaving",
        "Knitting",
        "Crocheting",
        "Upholstery (furniture)",
        "Shoemaking/Cobbling",
        "Textile Design",
        "Quilting",
        "Dressmaking",
        "Costume Design",
        "Millinery (hat making)",
      ],
    },
    {
      cat: "Ceramics & Pottery",
      image: "../pic/ceramic.jpg",
      skills: [
        "Pottery (wheel throwing)",
        "Pottery (hand-building)",
        "Ceramic Art (sculpture)",
        "Tile Making",
        "Ceramic Painting",
        "Kiln Operation",
        "Ceramic Art Restoration",
      ],
    },
    {
      cat: "Jewelry & Metalcraft",
      image: "../pic/jewelry.jpg",
      skills: [
        "Jewelry Design",
        "Jewelry Making",
        "Jewelry Repair",
        "Goldsmithing",
        "Silversmithing",
        "Metal Sculpting (small scale)",
        "Beadwork",
        "Lapidary (stone cutting)",
        "Watch / Clock Making/Repair",
        "Engraving (jewelry/metal)",
      ],
    },
    {
      cat: "Fine Arts",
      image: "../pic/fineArt.jpg",
      skills: [
        "Painting",
        "Sculpting",
        "Illustration",
        "Photography (fine art)",
        "Calligraphy",
        "Printmaking",
        "Digital Painting",
        "Mixed Media Art",
        "Drawing",
      ],
    },
    {
      cat: "Culinary Arts",
      image: "../pic/culinary.jpg",
      skills: [
        "Baking",
        "Cake Decorating",
        "Chef Services (specialized)",
        "Catering",
        "Chocolatier",
        "Confectionery",
        "Butchery (artisanal)",
        "Cheese Making (artisanal)",
        "Brewing (craft beer)",
        "Winemaking (small batch)",
        "Food Preservation",
      ],
    },
    {
      cat: "Technology & Electronics",
      image: "../pic/tech.jpg",
      skills: [
        "Computer Repair",
        "Electronics Repair (devices)",
        "Custom Electronics Design",
        "Audio / Visual Installation",
        "Network Troubleshooting",
        "Embedded Systems Development",
        "Robotics Servicing",
        "Drone Repair/Customization",
      ],
    },
    {
      cat: "Printing & Graphics",
      image: "../pic/printing.jpeg",
      skills: [
        "Graphic Design",
        "Screen Printing",
        "Sign Making",
        "Digital Printing",
        "Bookbinding",
        "Letterpress Printing",
        "Illustration (for print)",
        "Typesetting",
      ],
    },
    {
      cat: "Glasswork",
      image: "../pic/glass.jpeg",
      skills: [
        "Stained Glass Art",
        "Glass Blowing",
        "Glass Etching",
        "Glass Fusing",
        "Glass Sculpting",
        "Glass Repair / Restoration",
        "Mirror Making",
      ],
    },
    {
      cat: "Music & Instruments",
      image: "../pic/music.jpeg",
      skills: [
        "Instrument Repair (general)",
        "Luthier (stringed instruments)",
        "Piano Tuning",
        "Organ Building / Repair",
        "Brass / Woodwind Repair",
        "Custom Instrument Making",
        "Music Teaching (instrumental)",
      ],
    },
    {
      cat: "Event Services",
      image: "../pic/event.jpeg",
      skills: [
        "Event Planning",
        "Event Decorating",
        "Set Design",
        "Event Lighting",
        "Event Sound",
        "Event Catering",
        "Floral Arrangements (events)",
        "Party Rentals (specialized)",
      ],
    },
    {
      cat: "Pet Services",
      image: "../pic/pet.jpeg",
      skills: [
        "Pet Grooming",
        "Pet Training",
        "Pet Sitting / Walking (specialized)",
        "Custom Pet Accessories (making)",
        "Pet Photography",
        "Animal Massage Therapy",
      ],
    },
    {
      cat: "Renewable Energy",
      image: "../pic/renewable.jpeg", 
      skills: [
        "Solar Panel Installation",
        "Solar Panel Maintenance",
        "Wind Turbine Maintenance",
        "Renewable Energy System Design",
        "Energy Auditing (renewable focus)",
        "Small-Scale Hydro Installation",
      ],
    },
    {
      cat: "Education & Training",
      image: "../pic/education.jpeg",
      skills: [
        "Artisan Skill Instruction (specific craft)",
        "Vocational Training (skilled trades)",
        "Craft Mentoring",
        "Workshop Leading",
      ],
    },
    {
      cat: "Upcycling & Recycling",
      image: "../pic/recycling.jpeg",
      skills: [
        "Furniture Restoration (upcycling focus)",
        "Upcycled Clothing Design",
        "Art from Recycled Materials",
        "Product Life Extension / Repair",
        "Reclaimed Material Product Creation",
      ],
    },
    {
      cat: "Stone & Masonry Art",
      image: "../pic/stoneMasonary.jpeg",
      skills: [
        "Stone Carving",
        "Monument Creation",
        "Stone Sculpting",
        "Decorative Stone Masonry",
        "Artistic Paving Stone Installation",
      ],
    },
    {
      cat: "Digital Arts",
      image: "../pic/DigitalArts.jpeg",
      skills: [
        "Digital Painting",
        "3D Modeling",
        "Animation (2D/3D)",
        "Motion Graphics",
        "Web Design (artistic focus)",
        "Game Art",
        "Digital Sculpting",
        "Texture Art",
      ],
    },
];


let allSkills = Catalog.flatMap(category => category.skills);
const itemsPerPage = 30;
let currentPage = 0;

const dropdownService = document.querySelector(".dropdown");
const ServiceProvided = document.getElementById("ServiceProvided");
const dropdownContent = document.getElementById("dropdownContent");
const containerService = document.getElementById("items-container");
const serviceSearch = document.getElementById("search");
const navPrev = document.getElementById("navPrev");
const navNext = document.getElementById("navNext");

function renderItems(filteredItems = allSkills) {
  containerService.innerHTML = "";
  const start = currentPage * itemsPerPage;
  const end = start + itemsPerPage;
  const visibleItems = filteredItems.slice(start, end);

  visibleItems.forEach(item => {
  const div = document.createElement("div");
    div.textContent = item;
    div.style.padding = "5px";
    div.style.cursor = "pointer";
    
    div.addEventListener("click", () => {
      ServiceProvided.textContent = item;
      dropdownService.classList.remove("show");
    });
    containerService.appendChild(div);
  });

  navPrev.disabled = currentPage === 0;
  navNext.disabled = end >= filteredItems.length;
}

function updatePage(increment) {
currentPage += increment;
renderItems();
}

serviceSearch.addEventListener("input", () => {
const query = serviceSearch.value.toLowerCase();
const filteredItems = allSkills.filter(item => item.toLowerCase().includes(query));
currentPage = 0;
renderItems(filteredItems);
});

navPrev.addEventListener("click", () => updatePage(-1));
navNext.addEventListener("click", () => updatePage(1));
ServiceProvided.addEventListener("click", () => dropdownService.classList.toggle("show"));
document.addEventListener("click", (event) => {
if (!dropdownService.contains(event.target)) {
dropdownService.classList.remove("show");
}
});

renderItems(); 

//SELECTION OF USER TABS

const tabs = document.querySelectorAll('.tab_btn'),
      all_content = document.querySelectorAll('.content'),
      slide_content = document.querySelectorAll('.slide-show');

tabs.forEach((tab, index) => {
    tab.addEventListener('click', ()=>{
        tabs.forEach(tab =>{
            tab.classList.remove('active');
        });
        tab.classList.add('active');

        all_content.forEach(content =>{
            content.classList.remove('active');
        });
        all_content[index].classList.add('active');

        slide_content.forEach(slide =>{
            slide.classList.remove('active');
        });
        slide_content[index].classList.add('active');
    });
});



//ARTISAN SIGN UP SECTION
const circles = document.querySelectorAll(".circle"),
  progressBar = document.querySelector(".indicator"),
  buttons = document.querySelectorAll(".button"),
  content = document.querySelectorAll('.artisan-content'),
  artisan_sub = document.querySelectorAll('.artisan-submit');

let currentStep = 1;


const updateSteps = (e) => {
  //First Section of Signup
  const pfName = document.getElementById('PfirstName').value.trim();
  const pLName = document.getElementById('PlastName').value.trim();
  const telephone = document.getElementById('Ptel').value;
  const fileInput = document.getElementById('fileInput');
  const email = document.getElementById('Pemail').value.trim();
  const ageRange = document.getElementById('Page').innerText.trim();
  const gender = document.querySelector("input[name='gender']:checked")?.value || "N/A";
  
  //Second section of Signup
  const serviceProvided = document.getElementById('ServiceProvided').textContent;
  const yearsExperience = document.getElementById("yrsExp").innerText.trim();
  const education = document.getElementById("EduBg").innerText.trim();
  const certificate = document.querySelector("input[name='certificate']:checked")?.value || "N/A";

  const ServiceInstitution =  document.getElementById('ServiceInstitution').value.trim();
  const yrAdmin =  document.getElementById('yrAdmin').value.trim();
  const yrComp = document.getElementById('yrComp').value.trim();
  const file1 = document.getElementById('file1');

  //Third section of the signup
  const homeAddress = document.getElementById("PhomeLoc").value.trim();
  const workAddress = document.getElementById("PworkLoc").value.trim();
  const policeReport = document.getElementById("policeReport").value.trim();
  const fCard =document.getElementById('frontGcard').innerText.trim();
  const bCard =document.getElementById('backGcard').innerText.trim();

  //Fourth Section of the signup
  const Ppassword = document.getElementById("Ppassword").value.trim();
  const PconfirmPassword = document.getElementById("PconfirmPassword").value.trim();

  // update current step based on the button clicked
  if(currentStep == 1){
    if(pfName == "" || pLName == "" || !fileInput.files[0] || telephone == ""||email == ""||ageRange == "Select Age" || gender == "N/A"){
      alert('All Fields Must be Filled to Proceed');
    }
    else {
      currentStep = e.target.id === "next" ? ++currentStep : --currentStep;
  
      // loop through all circles and add/remove "active" class based on their index and current step
      circles.forEach((circle, index) => {
        circle.classList[`${index < currentStep ? "add" : "remove"}`]("active");
    
        content.forEach(content => {
          content.classList.remove('active');
        });
        content[currentStep - 1].classList.add('active');
      });
      
      // update progress bar width based on current step
      progressBar.style.width = `${((currentStep - 1) / (circles.length - 1)) * 100}%`;
    
      // check if current step is last step or first step and disable corresponding buttons
      if (currentStep === circles.length) {
        buttons[1].classList.remove('active');
        artisan_sub[1].classList.add('active');
      } 
      else if (currentStep === 1) {
        buttons[0].style.display = 'none';
      } 
      else {
        buttons[1].classList.add('active');
        artisan_sub[1].classList.remove('active');
        buttons[0].style.display = 'block';
      }
    }
  }
  else if(currentStep == 2){
    if(certificate == "N/A"|| serviceProvided == "Select a Service" || yearsExperience == "Select Years of Experience"  || education == "Select Educational Background"){
      alert('All Fields Must be Filled to Proceed');  
    }
    else if(certificate == "certified" && (!file1.files[0] || ServiceInstitution == "" || yrAdmin == "" || yrComp == "")){
      alert('All Fields Must be Filled to Proceed'); 
    }
    else {
      currentStep = e.target.id === "next" ? ++currentStep : --currentStep;
  
      // loop through all circles and add/remove "active" class based on their index and current step
      circles.forEach((circle, index) => {
        circle.classList[`${index < currentStep ? "add" : "remove"}`]("active");
    
        content.forEach(content => {
          content.classList.remove('active');
        });
        content[currentStep - 1].classList.add('active');
      });
      
      // update progress bar width based on current step
      progressBar.style.width = `${((currentStep - 1) / (circles.length - 1)) * 100}%`;
    
      // check if current step is last step or first step and disable corresponding buttons
      if (currentStep === circles.length) {
        buttons[1].classList.remove('active');
        artisan_sub[1].classList.add('active');
      } 
      else if (currentStep === 1) {
        buttons[0].style.display = 'none';
      } 
      else {
        buttons[1].classList.add('active');
        artisan_sub[1].classList.remove('active');
        buttons[0].style.display = 'block';
      }
    }
  }
  else if(currentStep == 3){
    if(homeAddress == "" || workAddress == "" || policeReport == "" || fCard != "Front Verified"  || bCard != "Back Verified"){
      alert('All Fields Must be Filled to Proceed');
    }
    else {
      currentStep = e.target.id === "next" ? ++currentStep : --currentStep;
      // loop through all circles and add/remove "active" class based on their index and current step
      circles.forEach((circle, index) => {
        circle.classList[`${index < currentStep ? "add" : "remove"}`]("active");
    
        content.forEach(content => {
          content.classList.remove('active');
        });
        content[currentStep - 1].classList.add('active');
      });
      
      // update progress bar width based on current step
      progressBar.style.width = `${((currentStep - 1) / (circles.length - 1)) * 100}%`;
    
      // check if current step is last step or first step and disable corresponding buttons
      if (currentStep === circles.length) {
        buttons[1].classList.remove('active');
        artisan_sub[1].classList.add('active');
      } 
      else if (currentStep === 1) {
        buttons[0].style.display = 'none';
      } 
      else {
        buttons[1].classList.add('active');
        artisan_sub[1].classList.remove('active');
        buttons[0].style.display = 'block';
      }
    }
  }
  else if(currentStep == 4){
    if(PconfirmPassword == "" || Ppassword == "" ){
      alert('All Fields Must be Filled to Proceed');
    }
    else {
      currentStep = e.target.id === "next" ? ++currentStep : --currentStep;
  
      // loop through all circles and add/remove "active" class based on their index and current step
      circles.forEach((circle, index) => {
        circle.classList[`${index < currentStep ? "add" : "remove"}`]("active");
    
        content.forEach(content => {
          content.classList.remove('active');
        });
        content[currentStep - 1].classList.add('active');
      });
      
      // update progress bar width based on current step
      progressBar.style.width = `${((currentStep - 1) / (circles.length - 1)) * 100}%`;
    
      // check if current step is last step or first step and disable corresponding buttons
      if (currentStep === circles.length) {
        buttons[1].classList.remove('active');
        artisan_sub[1].classList.add('active');
      } 
      else if (currentStep === 1) {
        buttons[0].style.display = 'none';
      } 
      else {
        buttons[1].classList.add('active');
        artisan_sub[1].classList.remove('active');
        buttons[0].style.display = 'block';
      }
    }
  }
  else {
    currentStep = e.target.id === "next" ? ++currentStep : --currentStep;

    // loop through all circles and add/remove "active" class based on their index and current step
    circles.forEach((circle, index) => {
      circle.classList[`${index < currentStep ? "add" : "remove"}`]("active");
  
      content.forEach(content => {
        content.classList.remove('active');
      });
      content[currentStep - 1].classList.add('active');
    });
    
    // update progress bar width based on current step
    progressBar.style.width = `${((currentStep - 1) / (circles.length - 1)) * 100}%`;
  
    // check if current step is last step or first step and disable corresponding buttons
    if (currentStep === circles.length) {
      buttons[1].classList.remove('active');
      artisan_sub[1].classList.add('active');
    } 
    else if (currentStep === 1) {
      buttons[0].style.display = 'none';
    } 
    else {
      buttons[1].classList.add('active');
      artisan_sub[1].classList.remove('active');
      buttons[0].style.display = 'block';
    }
  }
  
};
buttons.forEach((button) => {
  button.addEventListener("click", updateSteps);
});



//PERSONAL DETAILS SECTION
document.getElementById('fileInput').addEventListener('change', function(event) {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const imgElement = document.getElementById('previewImg');
      imgElement.src = e.target.result;
      imgElement.style.display = 'block';
    }
    reader.readAsDataURL(file);
  }
});
// AGE SELECTION
const optionMenus = document.querySelectorAll(".select-menu");
optionMenus.forEach(optionMenu => {
  const selectBtn = optionMenu.querySelector(".select-btn"),
          options = optionMenu.querySelectorAll(".option"),
          sBtn_text = optionMenu.querySelector(".sBtn-text");

  selectBtn.addEventListener("click", () => {
      
    optionMenus.forEach(menu => {
      if (menu !== optionMenu) {
        menu.classList.remove("active");
      }
    });

    optionMenu.classList.toggle("active");
  });

  options.forEach(option => {
    option.addEventListener("click", () => {
      sBtn_text.innerText = option.innerText; 
      optionMenu.classList.remove("active"); 
    });
  });
});


//-------------TELEPHONE NUMBER
const telInput = document.getElementById("Ptel");
const telError = document.getElementById("telError");

function isGhanaianPhoneNumber(phoneNumber) {
    const cleanedNumber = phoneNumber.replace(/[\s-]/g, '');
    const ghanaianPattern = /^\+233(2[034678]|5[045679])\d{7}$/;
    return ghanaianPattern.test(cleanedNumber);
}

telInput.addEventListener("input", function() {
    if (telInput.value.trim() === "") {
      telError.style.display = "none"; // Hide error if input is empty
      return;
    }

    if (!isGhanaianPhoneNumber(telInput.value)) {
      telError.textContent = "Invalid Ghanaian number (+233...)";
      telError.style.display = "block";
    } else {
      telError.style.display = "none";
    }
});

// Example of using the validation before submission
function validateAndSubmit() {
    if (!isGhanaianPhoneNumber(telInput.value)) {
        telError.textContent = "Invalid Ghanaian number (+233...)";
        telError.style.display = "block";
        return false; // Prevent form submission
    } else {
        telError.style.display = "none";
        // Proceed with form submission or other actions
        alert("Number is valid, submitting data...");
        return true; // allow form submission.
    }
}



// Close dropdowns if clicked outside
document.addEventListener("click", (e) => {
  optionMenus.forEach(menu => {
    if (!menu.contains(e.target)) {
      menu.classList.remove("active");
    }
  });
});

//CHECK THE ADMISSION AND COMPLETION DATES
function validateYears(admissionYear, completionYear) {
  const currentYear = new Date().getFullYear();

  const yearDifference = completionYear - admissionYear;

  if (yearDifference !== 2 && yearDifference !== 1) {
    return false;
  }

  return true;
}
function validateYearsFromHTML(admissionYearStr, completionYearStr, admissionInputId, completionInputId) {
  const admissionYear = parseInt(admissionYearStr);
  const completionYear = parseInt(completionYearStr);

  if (validateYears(admissionYear, completionYear)) {
    return true; 
  } 
  else {
    alert("Invalid years. Completion year must be 2 or 3 years after admission.");
    document.getElementById(admissionInputId).value = "";
    document.getElementById(completionInputId).value = "";
    return false; 
  }
}
function handleValidation() {
  const admissionYearInput = document.getElementById("yrAdmin");
  const completionYearInput = document.getElementById("yrComp");

  if (admissionYearInput && completionYearInput) {

    validateYearsFromHTML(admissionYearInput.value, completionYearInput.value, "yrAdmin", "yrComp");
  } 
  else {
    alert("Input elements not found.");
  }
}

document.getElementById("yrComp").addEventListener("change", handleValidation);


      
                //FIELD OF CERTICATION
const container = document.querySelector('.certificate-proof');
container.style.display = 'none'

function showSelected() {
  const selected = document.querySelector('input[name="certificate"]:checked');
  if (selected.value == 'certified') {
    if(selected.value == 'certified'){
      container.style.display = 'block'
    }
  } 
  else {
    container.style.display = 'none'
  }
}
const radio = document.querySelectorAll('input[name="certificate"]');
radio.forEach((selected) => {
  selected.addEventListener('click', (e) => {
    showSelected();
  });
});

async function displayFileNameAndPreview(input) {
  var label = input.previousElementSibling;
  var file = input.files[0];

  if (!file) return; // If no file is selected, do nothing

  let formData = new FormData();
  formData.append("image", file);

  try {
    let response = await fetch("http://127.0.0.1:5000/verify", {
      method: "POST",
      body: formData,
    });

    let result = await response.json();

    if (result.status === "front" && input.id === "file3") {
      label.textContent = "Front Verified ";
      label.style.backgroundColor = "green";
    } else if (result.status === "back" && input.id === "file4") {
      label.textContent = "Back Verified ";
      label.style.backgroundColor = "green";
    } else {
      alert(" Invalid image! Please upload the correct side of the Ghana Card.");
      input.value = ""; // Clear the file input
      label.textContent = "Upload Failed ";
      label.style.backgroundColor = "red";
    }
  } catch (error) {
    console.error("Error verifying image:", error);
    alert(" Verification failed. Please try again.");
    input.value = "";
    label.textContent = "Upload Failed ";
    label.style.backgroundColor = "red";
  }
}
function displayPreview(input){
  // Get the label element associated with the current input
  var label = input.previousElementSibling;

  label.textContent = "Uploaded Successfully" ;
  label.style.backgroundColor = 'green';
}


//---------------HOME LOCATION AND WORK LOCATION OF ARTISAN--------------------
function getUserLocation(inputId) {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(position => {
      let lat = position.coords.latitude;
      let lon = position.coords.longitude;
      fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`)
        .then(response => response.json())
        .then(data => {
          let locationName = data.display_name || "Unknown Location";
          document.getElementById(inputId).value = locationName;
          toggleIcon(inputId);
        })
        .catch(() => alert("Could not determine your location."));
    }, () => alert("Location access denied. Please enable location services."));
  } else {
    alert("Geolocation is not supported by your browser.");
  }
}

function toggleIcon(inputId) {
  let inputField = document.getElementById(inputId);
  let icon = inputField.nextElementSibling;
  //icon.style.display = inputField.value.trim() ? "none" : "inline";
}






                    //FEILD OF PAYMENT
const password = document.getElementById("Ppassword");
const confirmPassword = document.getElementById("PconfirmPassword");
const confirmation = document.querySelector('.confirmationTxt');
const check = document.querySelector('.fa-circle-check');
const passTxt = document.querySelector('.passText');

confirmPassword.addEventListener("input", function() {
  if ((password.value.length != 0) && (confirmPassword.value === password.value)) {
    passTxt.style.display = 'block';
    check.classList.add('valid');
    confirmation.classList.add('valid');
    confirmation.innerHTML = 'Password Correct';
  }
  else{
    passTxt.style.display = 'block';
    check.classList.add('invalid');
    confirmation.classList.add('invalid');
    confirmation.innerHTML = `Password Doesn't match`;
  }
});